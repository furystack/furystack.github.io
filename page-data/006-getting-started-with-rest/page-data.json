{"componentChunkName":"component---src-templates-post-tsx","path":"/006-getting-started-with-rest/","result":{"data":{"logo":null,"markdownRemark":{"html":"<h3>The problem ü§∑‚Äç‚ôÇÔ∏è</h3>\n<p>The old-fashioned approach is to decouple <em>nearly everything</em>, but (as a fullstack dev) when speaking about the relation between REST API‚Äôs, there is a problem:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c7559848b7462aa174e52e6cd10fda3e/953fe/006-joker.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 104.60000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAVABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAYHCAn/xAAYAQACAwAAAAAAAAAAAAAAAAAEBQECA//aAAwDAQACEAMQAAAB572zhGz4vAEHbC9L7WBGeQwiZf/EABsQAQADAQADAAAAAAAAAAAAAAUDBAYBAgcR/9oACAEBAAEFAiNvXzsMftGxwu8yJatRfVJ5EkEguHzS+GRu50Okw+Qd3R0hLKn/xAAjEQEAAQMDBAMBAAAAAAAAAAABAgMREgQTIQAiMkExUVJh/9oACAEDAQE/AaaDMxzakZbC4k7xITk7eUW+KY/J3GOSMXb1HqjNGyJBbjZOTh460kSdOvOReVOgyh6xdynTvY48JyDjjyO4E01GnKhSkirH9z+/5Lr/xAAhEQACAQMEAwEAAAAAAAAAAAABAgMREiEABBMxIkFhsf/aAAgBAgEBPwGYR3hkEqQRsglqbiC1USr8dpUyjzHiQitUildckAxypjGXAyPh1Lh4wOmcBvotu777A/Osa3m4lTczKrAANgWIfQ9lSdf/xAAmEAACAgAFBAIDAQAAAAAAAAACAwEEBQYREhMAFCEjFSIyM0Ex/9oACAEBAAY/ArKaeWaALvkktlrEW3ZO0pYR6YciIrLf/j66vUcEA+JWOvc2MuUOVtrSovUhRMwBxYY0jqw2WrMtINclvZJC7Q0/Z1hmWRl7mudYP57Ep5XucxrGfrGB3Sf4xGnjX+6dJbZKAmSOYkBiAHSdxenXzH4jER408fzq/VJmHiGGRy16kVp7nbfscll6XcpdutfZr3lMx5dxjE8pdLan2iwNZ2iU7DgiAgmYiYmY266xM6xMT18dXy8Vj6YDfY6+/BcQMrFqmltiAm7liw1VebJGxdeHysVbUOixtlhV7dTL6N9mza3hYTlhqo74qijgVrykiOMOPkWoty1MkiSKt7eRturWxWl3gLt2UrxWoNfvLMc1g6teng1GtTrEReqopO1UR+w5nXr/xAAZEAEBAQEBAQAAAAAAAAAAAAABEQAhMUH/2gAIAQEAAT8hQOesxBxagACzvwWzObiyMhkhhSxmc2SLBcPSsWREgISHpYrn1WNol1lshT1LcdJYUMJGxDICu7B0TveNlYDtwCZCSXdAPU39n1fj8fERIMTU6Of/2gAMAwEAAgADAAAAEJwfQv/EABkRAQEBAQEBAAAAAAAAAAAAAAERAEEhMf/aAAgBAwEBPxDqEUCZzIStEzpeIQA4EANIaPXuCgiPQsKViBVJDOPmRWHxB4AQAAAIb//EABkRAQEBAQEBAAAAAAAAAAAAAAERIQBRof/aAAgBAgEBPxDArCC3gRgJIhyxRKUICRFBESRPjtukpirTKrCxLoVUqHY+C0akrqqrX17/xAAXEAEBAQEAAAAAAAAAAAAAAAABEQAQ/9oACAEBAAE/EFCTy+JufNwEGbQacvLvjotzSKSu4vyNgMjBbB31Oa5WA90G2t2habt6PF+rPPLJ4ZEBAFaTFn2Mp+5iYctsmSFvMfIm0l3TUeJLJp0W/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Does clients depends on APIs?\"\n        title=\"Does clients depends on APIs?\"\n        src=\"/static/c7559848b7462aa174e52e6cd10fda3e/953fe/006-joker.jpg\"\n        srcset=\"/static/c7559848b7462aa174e52e6cd10fda3e/953fe/006-joker.jpg 500w\"\n        sizes=\"(max-width: 500px) 100vw, 500px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>So, let‚Äôs dig deep into the good old S.O.L.I.D. principles, until the end of it, where <strong>D</strong> stands for <strong>dependency inversion</strong>‚Ä¶ khm:</p>\n<blockquote>\n<p>Entities must depend on abstractions, not on concretions.</p>\n</blockquote>\n<p>So, again, let‚Äôs get this straight. The happy path should be:</p>\n<ol>\n<li>Design an abstraction (interface) for the API</li>\n<li>Implement your API</li>\n<li>The client should depend on the abstraction, not the actual implementation</li>\n</ol>\n<p>In FuryStack, there is 3 type of REST packages which are meant to solve the scenarios. In order:</p>\n<ol>\n<li><code class=\"language-text\">@furystack/rest</code> for the API design</li>\n<li><code class=\"language-text\">@furystack/rest-service</code> for the implementation</li>\n<li><code class=\"language-text\">@furystack/rest-client-fetch</code> and <code class=\"language-text\">@furystack/rest-client-got</code> for consuming the API</li>\n</ol>\n<h3>Prerequisites üëà</h3>\n<p>To be able to use this ideal path, you have to share the abstraction between the service and the consumer / frontend.\r\nThe preferred way can be some kind of a Monorepo (see the Boilerplate app‚Äôs approacth with Yarn Workspaces).\r\nIf you can‚Äôt do that, you can still extract the definition to e.g. an NPM package.</p>\n<h3>Step One - Design your API first. üìê</h3>\n<p>If you want to achieve the first step, your API should have an abstraction. An interface. And that should be a‚Ä¶ (drumroll ü•Å )‚Ä¶ <strong>Typescript Interface</strong> üéâ</p>\n<p>The following example can give you the idea how you should implement the API</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\r\n  DeleteEndpoint<span class=\"token punctuation\">,</span>\r\n  GetCollectionEndpoint<span class=\"token punctuation\">,</span>\r\n  GetEntityEndpoint<span class=\"token punctuation\">,</span>\r\n  PatchEndpoint<span class=\"token punctuation\">,</span>\r\n  PostEndpoint<span class=\"token punctuation\">,</span>\r\n  RestApi<span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@furystack/rest'</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Mock</span> <span class=\"token punctuation\">{</span>\r\n  id<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\r\n  value<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">CustomQuery</span> <span class=\"token punctuation\">{</span>\r\n  query<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> foo<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span> bar<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span> baz<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token punctuation\">}</span>\r\n  result<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> foo<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span> bar<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span> baz<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">CustomUrl</span> <span class=\"token punctuation\">{</span>\r\n  url<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token punctuation\">}</span>\r\n  result<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">CustomHeaders</span> <span class=\"token punctuation\">{</span>\r\n  headers<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> foo<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span> bar<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span> baz<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token punctuation\">}</span>\r\n  result<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> foo<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span> bar<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span> baz<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">CustomBody</span> <span class=\"token punctuation\">{</span>\r\n  body<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> foo<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span> bar<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span> baz<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token punctuation\">}</span>\r\n  result<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> foo<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span> bar<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span> baz<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">MyApi</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">RestApi</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token constant\">GET</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token string\">'/custom-query'</span><span class=\"token operator\">:</span> CustomQuery\r\n    <span class=\"token string\">'/custom-url/:id'</span><span class=\"token operator\">:</span> CustomUrl\r\n    <span class=\"token string\">'/custom-headers'</span><span class=\"token operator\">:</span> CustomHeaders\r\n    <span class=\"token string\">'/mock'</span><span class=\"token operator\">:</span> GetCollectionEndpoint<span class=\"token operator\">&lt;</span>MockEntity<span class=\"token operator\">></span>\r\n    <span class=\"token string\">'/mock/:id'</span><span class=\"token operator\">:</span> GetEntityEndpoint<span class=\"token operator\">&lt;</span>MockEntity<span class=\"token punctuation\">,</span> <span class=\"token string\">'id'</span><span class=\"token operator\">></span>\r\n  <span class=\"token punctuation\">}</span>\r\n  <span class=\"token constant\">POST</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token string\">'/custom-body'</span><span class=\"token operator\">:</span> CustomBody\r\n    <span class=\"token string\">'/mock'</span><span class=\"token operator\">:</span> PostEndpoint<span class=\"token operator\">&lt;</span>Mock<span class=\"token punctuation\">,</span> <span class=\"token string\">'id'</span><span class=\"token operator\">></span>\r\n  <span class=\"token punctuation\">}</span>\r\n  <span class=\"token constant\">PATCH</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token string\">'/mock/:id'</span><span class=\"token operator\">:</span> PatchEndpoint<span class=\"token operator\">&lt;</span>Mock<span class=\"token punctuation\">,</span> <span class=\"token string\">'id'</span><span class=\"token operator\">></span>\r\n  <span class=\"token punctuation\">}</span>\r\n  <span class=\"token constant\">DELETE</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token string\">'/mock/:id'</span><span class=\"token operator\">:</span> DeleteEndpoint<span class=\"token operator\">&lt;</span>Mock<span class=\"token punctuation\">,</span> <span class=\"token string\">'id'</span><span class=\"token operator\">></span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>So the interface is build on two levels. The first level defines the HTTP method.</p>\n<p>The second level is actually a <em>key-value pair</em>. The key will be the URL endpoint, the second one is the type in a predefined format.\r\nThe custom types can contain the following fields:</p>\n<ul>\n<li><code class=\"language-text\">result</code>: This will be the type of the response on success</li>\n<li><code class=\"language-text\">url</code>: An URL parameter object. This should be also part of the url (e.g. if you define the <code class=\"language-text\">{id: string}</code> as type, the <code class=\"language-text\">/:id</code> parameter)</li>\n<li><code class=\"language-text\">headers</code>: The required explicit headers</li>\n<li><code class=\"language-text\">query</code>: The query string parameters</li>\n<li><code class=\"language-text\">body</code>: The POST Body parameters</li>\n</ul>\n<p>There are also some entity-related shortcut types in the example, e.g. <code class=\"language-text\">PatchEndpoint&lt;T, TKey&gt;</code> stands for <code class=\"language-text\">{ body: Partial&lt;T&gt;, url: { id: T[TPrimaryKey] }, result: undefined}</code></p>\n<h3>Step Two - Implement üõ†</h3>\n<p>OK, we‚Äôve got a well-defined REST API with all the payloads, bodys, headers, bells and whistles. Now we can implement it, so let‚Äôs move to the <em>service-side</em>.</p>\n<p>So, an example API implementation overview looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> i <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Injector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\ni<span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">useRestService</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>MyApi<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n  port<span class=\"token operator\">:</span> <span class=\"token number\">1234</span><span class=\"token punctuation\">,</span>       <span class=\"token comment\">// The port that the app will use</span>\r\n  root<span class=\"token operator\">:</span> <span class=\"token string\">'/api/v1'</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\">// The root path of your API</span>\r\n  api<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token constant\">GET</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token string\">\"/custom-headers\"</span><span class=\"token operator\">:</span> customHeadersEndpoint\r\n    <span class=\"token punctuation\">}</span>\r\n    <span class=\"token comment\">/*(...and you should implement all endpoints here if you want to compile it. Good luck ;) )*/</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>So, the basic structure is similar to the interface, you should use the <code class=\"language-text\">.useRestService&lt;T&gt;()</code> injector extension with some basic options like the port or root path.\r\nThe <code class=\"language-text\">api</code> should follow the same structure as the definition, but the <code class=\"language-text\">customHeadersEndpoint</code> should implement the endpoint <code class=\"language-text\">CustomHeaders</code>. So let‚Äôs take a look at this:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> customHeadersEndpoint<span class=\"token operator\">:</span> RequestAction<span class=\"token operator\">&lt;</span>CustomHeaders<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> headers <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>headers<span class=\"token punctuation\">)</span> <span class=\"token comment\">// The type is inferred from CustomHeaders: { foo: string; bar: number; baz: boolean }</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token function\">JsonResult</span><span class=\"token punctuation\">(</span>headers<span class=\"token punctuation\">)</span> <span class=\"token comment\">// This should also match the `result` type</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The magical part is covered by the <code class=\"language-text\">RequestAction&lt;CustomHeaders&gt;</code>. This generic type tells that this</p>\n<ul>\n<li>Should be an async method</li>\n<li>Will recieve headers with a specified type</li>\n<li>Should return the JsonResult with a specified type</li>\n</ul>\n<p>The other properties will be also inferred:</p>\n<ul>\n<li>if there is <code class=\"language-text\">{ url: T }</code> defined on the interface, you will have <code class=\"language-text\">getUrlParams: ()=&gt; T</code> in the parameter object</li>\n<li>if there is <code class=\"language-text\">{ body: T }</code> defined, you will get <code class=\"language-text\">getBody: () =&gt; Promise&lt;T&gt;</code> in the parameter object</li>\n<li>if there is <code class=\"language-text\">{ query: T }</code> defined, you will get <code class=\"language-text\">getQuery: () =&gt; T</code></li>\n</ul>\n<h3>Consume your interface, not your API üçΩ</h3>\n<p>OK, we have an interface and an implementation. The interface is shared between the service and the client. So let‚Äôs take a look how the client can consume the API.\r\nLet‚Äôs take a simple approacth with the native <code class=\"language-text\">fetch</code> implementation (there‚Äôs also a <code class=\"language-text\">got</code>-based client implementation that can be used in node-based clients as well)</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createClient <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@furystack/rest-client-fetch'</span>\r\n\r\n<span class=\"token keyword\">const</span> callMyApi <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">createClient</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>MyApi<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n  endpointUrl<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">http://localhost:1234/api/v1</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n\r\n<span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">callMyApi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n  method<span class=\"token operator\">:</span> <span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span>    <span class=\"token comment\">// This should be the first property in order to work with Intellisense</span>\r\n  action<span class=\"token operator\">:</span> <span class=\"token string\">'/custom-headers'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// After selecting the action from the list, other required properties will be inferred and required</span>\r\n  headers<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    foo<span class=\"token operator\">:</span> <span class=\"token string\">'asd'</span><span class=\"token punctuation\">,</span>\r\n    bar<span class=\"token operator\">:</span> <span class=\"token number\">42</span><span class=\"token punctuation\">,</span>\r\n    baz<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>So, step by step:</p>\n<ol>\n<li>Select a method</li>\n<li>All available actions will be offered by IntelliSense</li>\n<li>Once you‚Äôve selected an action, the full payload will be inferred. You will get type checks in header, body, query, url, etc‚Ä¶ parameters. The response type will be also there for you üíö</li>\n</ol>\n<h3>The main gotcha: Let‚Äôs break all the thingzzz!!!!4!!!üí•</h3>\n<p>There‚Äôs an ancient refactoring technique in the <em>type-safe dreamlands</em>: If you can change your type definitions and try to recompile, you will see immediately where it will break your code.\r\nWe have good news: <strong>Now you can do that with your API definition</strong> - your backend service and your frontend app will is type-protected now üôå</p>\n<p><img src=\"/dbc0c92051f7c74f52512af8b90712bf/006-hulk.gif\" alt=\"hulk breaks thingz\"></p>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"The problem ü§∑‚Äç‚ôÇÔ∏è"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The old-fashioned approach is to decouple "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"nearly everything"}]},{"type":"text","value":", but (as a fullstack dev) when speaking about the relation between REST API‚Äôs, there is a problem:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/c7559848b7462aa174e52e6cd10fda3e/953fe/006-joker.jpg","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 104.60000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAVABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAYHCAn/xAAYAQACAwAAAAAAAAAAAAAAAAAEBQECA//aAAwDAQACEAMQAAAB572zhGz4vAEHbC9L7WBGeQwiZf/EABsQAQADAQADAAAAAAAAAAAAAAUDBAYBAgcR/9oACAEBAAEFAiNvXzsMftGxwu8yJatRfVJ5EkEguHzS+GRu50Okw+Qd3R0hLKn/xAAjEQEAAQMDBAMBAAAAAAAAAAABAgMREgQTIQAiMkExUVJh/9oACAEDAQE/AaaDMxzakZbC4k7xITk7eUW+KY/J3GOSMXb1HqjNGyJBbjZOTh460kSdOvOReVOgyh6xdynTvY48JyDjjyO4E01GnKhSkirH9z+/5Lr/xAAhEQACAQMEAwEAAAAAAAAAAAABAgMREiEABBMxIkFhsf/aAAgBAgEBPwGYR3hkEqQRsglqbiC1USr8dpUyjzHiQitUildckAxypjGXAyPh1Lh4wOmcBvotu777A/Osa3m4lTczKrAANgWIfQ9lSdf/xAAmEAACAgAFBAIDAQAAAAAAAAACAwEEBQYREhMAFCEjFSIyM0Ex/9oACAEBAAY/ArKaeWaALvkktlrEW3ZO0pYR6YciIrLf/j66vUcEA+JWOvc2MuUOVtrSovUhRMwBxYY0jqw2WrMtINclvZJC7Q0/Z1hmWRl7mudYP57Ep5XucxrGfrGB3Sf4xGnjX+6dJbZKAmSOYkBiAHSdxenXzH4jER408fzq/VJmHiGGRy16kVp7nbfscll6XcpdutfZr3lMx5dxjE8pdLan2iwNZ2iU7DgiAgmYiYmY266xM6xMT18dXy8Vj6YDfY6+/BcQMrFqmltiAm7liw1VebJGxdeHysVbUOixtlhV7dTL6N9mza3hYTlhqo74qijgVrykiOMOPkWoty1MkiSKt7eRturWxWl3gLt2UrxWoNfvLMc1g6teng1GtTrEReqopO1UR+w5nXr/xAAZEAEBAQEBAQAAAAAAAAAAAAABEQAhMUH/2gAIAQEAAT8hQOesxBxagACzvwWzObiyMhkhhSxmc2SLBcPSsWREgISHpYrn1WNol1lshT1LcdJYUMJGxDICu7B0TveNlYDtwCZCSXdAPU39n1fj8fERIMTU6Of/2gAMAwEAAgADAAAAEJwfQv/EABkRAQEBAQEBAAAAAAAAAAAAAAERAEEhMf/aAAgBAwEBPxDqEUCZzIStEzpeIQA4EANIaPXuCgiPQsKViBVJDOPmRWHxB4AQAAAIb//EABkRAQEBAQEBAAAAAAAAAAAAAAERIQBRof/aAAgBAgEBPxDArCC3gRgJIhyxRKUICRFBESRPjtukpirTKrCxLoVUqHY+C0akrqqrX17/xAAXEAEBAQEAAAAAAAAAAAAAAAABEQAQ/9oACAEBAAE/EFCTy+JufNwEGbQacvLvjotzSKSu4vyNgMjBbB31Oa5WA90G2t2habt6PF+rPPLJ4ZEBAFaTFn2Mp+5iYctsmSFvMfIm0l3TUeJLJp0W/9k='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Does clients depends on APIs?","title":"Does clients depends on APIs?","src":"/static/c7559848b7462aa174e52e6cd10fda3e/953fe/006-joker.jpg","srcSet":["/static/c7559848b7462aa174e52e6cd10fda3e/953fe/006-joker.jpg 500w"],"sizes":"(max-width: 500px) 100vw, 500px","style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy","decoding":"async"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"So, let‚Äôs dig deep into the good old S.O.L.I.D. principles, until the end of it, where "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"D"}]},{"type":"text","value":" stands for "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"dependency inversion"}]},{"type":"text","value":"‚Ä¶ khm:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Entities must depend on abstractions, not on concretions."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"So, again, let‚Äôs get this straight. The happy path should be:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Design an abstraction (interface) for the API"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Implement your API"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"The client should depend on the abstraction, not the actual implementation"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In FuryStack, there is 3 type of REST packages which are meant to solve the scenarios. In order:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"@furystack/rest"}]},{"type":"text","value":" for the API design"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"@furystack/rest-service"}]},{"type":"text","value":" for the implementation"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"@furystack/rest-client-fetch"}]},{"type":"text","value":" and "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"@furystack/rest-client-got"}]},{"type":"text","value":" for consuming the API"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Prerequisites üëà"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To be able to use this ideal path, you have to share the abstraction between the service and the consumer / frontend.\r\nThe preferred way can be some kind of a Monorepo (see the Boilerplate app‚Äôs approacth with Yarn Workspaces).\r\nIf you can‚Äôt do that, you can still extract the definition to e.g. an NPM package."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Step One - Design your API first. üìê"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you want to achieve the first step, your API should have an abstraction. An interface. And that should be a‚Ä¶ (drumroll ü•Å )‚Ä¶ "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Typescript Interface"}]},{"type":"text","value":" üéâ"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The following example can give you the idea how you should implement the API"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"ts"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-ts"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-ts"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  DeleteEndpoint"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  GetCollectionEndpoint"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  GetEntityEndpoint"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  PatchEndpoint"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  PostEndpoint"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  RestApi"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'@furystack/rest'"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"interface"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Mock"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  id"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"string"}]},{"type":"text","value":"\n  value"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"string"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"interface"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CustomQuery"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  query"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" foo"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"string"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" bar"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"number"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" baz"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"boolean"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n  result"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" foo"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"string"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" bar"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"number"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" baz"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"boolean"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"interface"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CustomUrl"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  url"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" id"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"number"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n  result"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" id"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"number"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"interface"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CustomHeaders"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  headers"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" foo"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"string"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" bar"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"number"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" baz"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"boolean"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n  result"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" foo"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"string"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" bar"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"number"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" baz"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"boolean"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"interface"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CustomBody"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  body"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" foo"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"string"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" bar"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"number"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" baz"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"boolean"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n  result"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" foo"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"string"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" bar"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"number"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" baz"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"boolean"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"interface"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MyApi"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"extends"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"RestApi"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","constant"]},"children":[{"type":"text","value":"GET"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'/custom-query'"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" CustomQuery\n    "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'/custom-url/:id'"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" CustomUrl\n    "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'/custom-headers'"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" CustomHeaders\n    "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'/mock'"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" GetCollectionEndpoint"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"MockEntity"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'/mock/:id'"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" GetEntityEndpoint"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"MockEntity"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'id'"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","constant"]},"children":[{"type":"text","value":"POST"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'/custom-body'"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" CustomBody\n    "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'/mock'"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" PostEndpoint"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"Mock"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'id'"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","constant"]},"children":[{"type":"text","value":"PATCH"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'/mock/:id'"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" PatchEndpoint"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"Mock"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'id'"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","constant"]},"children":[{"type":"text","value":"DELETE"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'/mock/:id'"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" DeleteEndpoint"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"Mock"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'id'"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"So the interface is build on two levels. The first level defines the HTTP method."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The second level is actually a "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"key-value pair"}]},{"type":"text","value":". The key will be the URL endpoint, the second one is the type in a predefined format.\r\nThe custom types can contain the following fields:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"result"}]},{"type":"text","value":": This will be the type of the response on success"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"url"}]},{"type":"text","value":": An URL parameter object. This should be also part of the url (e.g. if you define the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"{id: string}"}]},{"type":"text","value":" as type, the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/:id"}]},{"type":"text","value":" parameter)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"headers"}]},{"type":"text","value":": The required explicit headers"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"query"}]},{"type":"text","value":": The query string parameters"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"body"}]},{"type":"text","value":": The POST Body parameters"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"There are also some entity-related shortcut types in the example, e.g. "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"PatchEndpoint<T, TKey>"}]},{"type":"text","value":" stands for "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"{ body: Partial<T>, url: { id: T[TPrimaryKey] }, result: undefined}"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Step Two - Implement üõ†"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"OK, we‚Äôve got a well-defined REST API with all the payloads, bodys, headers, bells and whistles. Now we can implement it, so let‚Äôs move to the "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"service-side"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"So, an example API implementation overview looks like this:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"ts"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-ts"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-ts"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" i "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Injector"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\ni"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","generic-function"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"useRestService"}]},{"type":"element","tagName":"span","properties":{"className":["token","generic","class-name"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"MyApi"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]}]}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  port"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1234"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"       "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// The port that the app will use"}]},{"type":"text","value":"\n  root"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'/api/v1'"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// The root path of your API"}]},{"type":"text","value":"\n  api"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","constant"]},"children":[{"type":"text","value":"GET"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/custom-headers\""}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" customHeadersEndpoint\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"/*(...and you should implement all endpoints here if you want to compile it. Good luck ;) )*/"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"So, the basic structure is similar to the interface, you should use the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":".useRestService<T>()"}]},{"type":"text","value":" injector extension with some basic options like the port or root path.\r\nThe "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"api"}]},{"type":"text","value":" should follow the same structure as the definition, but the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"customHeadersEndpoint"}]},{"type":"text","value":" should implement the endpoint "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"CustomHeaders"}]},{"type":"text","value":". So let‚Äôs take a look at this:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"ts"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-ts"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-ts"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" customHeadersEndpoint"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" RequestAction"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"CustomHeaders"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"async"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" headers "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"=>"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"console"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"log"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"headers"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// The type is inferred from CustomHeaders: { foo: string; bar: number; baz: boolean }"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"JsonResult"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"headers"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// This should also match the `result` type"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The magical part is covered by the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"RequestAction<CustomHeaders>"}]},{"type":"text","value":". This generic type tells that this"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Should be an async method"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Will recieve headers with a specified type"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Should return the JsonResult with a specified type"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The other properties will be also inferred:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"if there is "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"{ url: T }"}]},{"type":"text","value":" defined on the interface, you will have "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"getUrlParams: ()=> T"}]},{"type":"text","value":" in the parameter object"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"if there is "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"{ body: T }"}]},{"type":"text","value":" defined, you will get "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"getBody: () => Promise<T>"}]},{"type":"text","value":" in the parameter object"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"if there is "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"{ query: T }"}]},{"type":"text","value":" defined, you will get "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"getQuery: () => T"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Consume your interface, not your API üçΩ"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"OK, we have an interface and an implementation. The interface is shared between the service and the client. So let‚Äôs take a look how the client can consume the API.\r\nLet‚Äôs take a simple approacth with the native "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"fetch"}]},{"type":"text","value":" implementation (there‚Äôs also a "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"got"}]},{"type":"text","value":"-based client implementation that can be used in node-based clients as well)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"ts"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-ts"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-ts"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" createClient "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'@furystack/rest-client-fetch'"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" callMyApi "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","generic-function"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"createClient"}]},{"type":"element","tagName":"span","properties":{"className":["token","generic","class-name"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"MyApi"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]}]}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  endpointUrl"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","template-string"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","template-punctuation","string"]},"children":[{"type":"text","value":"`"}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"http://localhost:1234/api/v1"}]},{"type":"element","tagName":"span","properties":{"className":["token","template-punctuation","string"]},"children":[{"type":"text","value":"`"}]}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" result "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"await"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"callMyApi"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  method"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'GET'"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// This should be the first property in order to work with Intellisense"}]},{"type":"text","value":"\n  action"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'/custom-headers'"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// After selecting the action from the list, other required properties will be inferred and required"}]},{"type":"text","value":"\n  headers"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    foo"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'asd'"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n    bar"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"42"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n    baz"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"false"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"So, step by step:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Select a method"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"All available actions will be offered by IntelliSense"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Once you‚Äôve selected an action, the full payload will be inferred. You will get type checks in header, body, query, url, etc‚Ä¶ parameters. The response type will be also there for you üíö"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"The main gotcha: Let‚Äôs break all the thingzzz!!!!4!!!üí•"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"There‚Äôs an ancient refactoring technique in the "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"type-safe dreamlands"}]},{"type":"text","value":": If you can change your type definitions and try to recompile, you will see immediately where it will break your code.\r\nWe have good news: "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Now you can do that with your API definition"}]},{"type":"text","value":" - your backend service and your frontend app will is type-protected now üôå"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"/dbc0c92051f7c74f52512af8b90712bf/006-hulk.gif","alt":"hulk breaks thingz"},"children":[]}]}],"data":{"quirksMode":false}},"excerpt":"The problem ü§∑‚Äç‚ôÇÔ∏è The old-fashioned approach is to decouple nearly everything, but (as a fullstack dev) when speaking about the relation‚Ä¶","fields":{"readingTime":{"text":"6 min read"}},"frontmatter":{"title":"REST in peace","userDate":"23 June 2021","date":"2021-06-23T12:58:20.257Z","tags":["Getting Started","rest","rest-service","rest-client-fetch","rest-client-got"],"excerpt":"Designing and implementing APIs can be hard and consuming them can be frustrating, if they doesn't work as expected. REST API as a Typescript interface to the rescue!","image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAcJAv/EABYBAQEBAAAAAAAAAAAAAAAAAAIAB//aAAwDAQACEAMQAAABVeZTVHxxvcm0T//EABoQAAMBAQEBAAAAAAAAAAAAAAQFBgMCBxP/2gAIAQEAAQUCY0UMyY6fMUgae43wFO1H2k7HqhWVXpdG7cf/xAAiEQABAgUEAwAAAAAAAAAAAAABAgQAAxESMRMUITIiQUL/2gAIAQMBAT8BYzW2qkOWaHCVGhBXNCq/PlqjKux9jFILlkCRtzwT1TKtzgXC6gwK8x//xAAjEQACAgEDAwUAAAAAAAAAAAABAgMREgQFEwAVIRQxUVJh/9oACAECAQE/AdbtXaCrS8ms0cgxLySLyQTD2wxwdkbxYYOV+xvx2TdHpk9AiNRVJAxdQaoMVjZb+aZh+nr/xAAkEAADAAEEAgEFAQAAAAAAAAABAgMEABESIQUxIhMUMkFRcf/aAAgBAQAGPwIY2D5if3lSFXIhjUTEvRulRmZUmXJ65qq7n82PvQxq8eS/J5inHJ+k3U6qjyVCOYIcB29oFYk6nV62kzjcyfgHn+uJ79j+jUbgKzRotFDeiyHdd/8AD3qtPI+NhSmLjP8AMU73A3LSDxZYvv2G4vsdWyY5NvFY0FGFi4OJcmccfGZwvOhRTarsWelSq777BVVQNf/EABkQAQEAAwEAAAAAAAAAAAAAAAERACExUf/aAAgBAQABPyFzVqnwqTCsTYw0hEd3TbqIjQ/kyz5crHQoNRF55lCqtyMh0EjjIiUwL4xtqSGCBOWiZv8ApfoDJTDE4v/aAAwDAQACAAMAAAAQ3D//xAAYEQEBAQEBAAAAAAAAAAAAAAABESEAMf/aAAgBAwEBPxDexERAphqQi+JVV4LUOCDUVChEa73/xAAXEQEBAQEAAAAAAAAAAAAAAAABIREA/9oACAECAQE/EHHiz3cWkFo5aDgJYgw0lqIsRQyF/8QAGBABAQEBAQAAAAAAAAAAAAAAAREAITH/2gAIAQEAAT8QEemNBmHHsYOMyamjn/sdGQ6Q5Y8MUSpFmiINtmSbBg+o6FSnMHD2RQ7SNJQO/wAimXksxfj3/9k=","aspectRatio":1.5,"src":"/static/4733ebf561cee32e92d9104845e8523e/68386/006-getting-started-with-rest-cover.jpg","srcSet":"/static/4733ebf561cee32e92d9104845e8523e/0079a/006-getting-started-with-rest-cover.jpg 930w,\n/static/4733ebf561cee32e92d9104845e8523e/68386/006-getting-started-with-rest-cover.jpg 1280w","sizes":"(max-width: 1280px) 100vw, 1280px"}}},"author":[{"id":"gallayl","bio":"Lead developer, architect and local demigod @FuryStack","avatar":{"children":[{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAcICgYJ/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABXZzxe8xMzqxkmv4EKA//xAAbEAACAwEBAQAAAAAAAAAAAAAEBQIDBgcBFP/aAAgBAQABBQJ31G4C/BZ08NcGAymIAwG9ZcqlmAcalNj8VdsoWb1yQpxq7rXRFIv/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAkEAACAgEEAgEFAAAAAAAAAAACAwEEBRESEyEABjEUJDNCUf/aAAgBAQAGPwLI18LbqjdzZY0KV1qgJWFrMxcfVW2AwtlqwMp+1g9K4NMOYSAJFlXJu96zWZOblO/bTkjxl9FuvZcsDUhgLhlZbibrJ1mcXXHCxnxRK9vzmIVy5AQpYzDY+3XCAyt4JInvpWWk0yEpLccbR2DAwMRMoK9C3rmstW1vYdB1E9x3ugds6xpPnrF51eknMhhq+HB3LvayueYt2QBc/jkUv5eQYGWrMYFkxMLKSGC02ZHMhprp2OYv6+AzSC2/qfYkPxIFETE7SjqdJif5MTpPnq3rmOUmrVtWpyjLYnbPJiykLCq10XG2mTWqKbesP464KNry5HNYXyNOn7Re4BJhxFgKtxm5hyTJl9pDnFvPVhbmTqZEXyU+f//EABgQAQEBAQEAAAAAAAAAAAAAAAERACEx/9oACAEBAAE/IZFe2mLrGVi6qM/uvtAryzYauggG4Zonls2OlRTeSBInRCA7LlEgdWpWI3jIkJwEgoCCXiPuqxoElb1AFh408EZOOj/ZimTpcBcvZO02rGr3D//aAAwDAQACAAMAAAAQcAgA/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAGRABAAMBAQAAAAAAAAAAAAAAAQARITEQ/9oACAEBAAE/EFWlwtxEnnyGQr1KTB9M3Kvmjq9dIgp4yCig6pe5uS16cHahnfSU9ZkE+Ygv2kgg6RA7mhyFjWcWpFAwjBliG3rGG6pZpBypylkP21XgP//Z","aspectRatio":1,"src":"/static/d7724f53280864f259a1cb93c2bd9d56/25252/gallayl.jpg","srcSet":"/static/d7724f53280864f259a1cb93c2bd9d56/b3d27/gallayl.jpg 40w,\n/static/d7724f53280864f259a1cb93c2bd9d56/5a735/gallayl.jpg 80w,\n/static/d7724f53280864f259a1cb93c2bd9d56/6e81a/gallayl.jpg 120w,\n/static/d7724f53280864f259a1cb93c2bd9d56/25252/gallayl.jpg 400w","sizes":"(max-width: 400px) 100vw, 400px"}}]}}]}},"relatedPosts":{"totalCount":6,"edges":[{"node":{"id":"83786420-d98c-502b-9e4d-ed33ee90da2f","excerpt":"Prerequisites Read the previous article about type-safe REST APIs, if you haven‚Äôt yet. It will give a huge boost on productivity. Seriously‚Ä¶","frontmatter":{"title":"Data validation with REST and json-schemas","date":"2021-06-23T13:58:20.257Z"},"fields":{"readingTime":{"text":"2 min read"},"slug":"/007-data-validation-with-rest-and-json-schema/"}}},{"node":{"id":"1366c6fe-b450-54f9-97bf-1906c129a56c","excerpt":"The problem ü§∑‚Äç‚ôÇÔ∏è The old-fashioned approach is to decouple nearly everything, but (as a fullstack dev) when speaking about the relation‚Ä¶","frontmatter":{"title":"REST in peace","date":"2021-06-23T12:58:20.257Z"},"fields":{"readingTime":{"text":"6 min read"},"slug":"/006-getting-started-with-rest/"}}},{"node":{"id":"1ab41dd0-2581-5e39-8809-08cf3b751e1c","excerpt":"Disclaimer If you are using a repository, use the repository all the time. - Anonymous As callbacks, authorization and data manipulation‚Ä¶","frontmatter":{"title":"Build a business layer with a Repository","date":"2021-06-23T10:58:20.257Z"},"fields":{"readingTime":{"text":"3 min read"},"slug":"/005-getting-started-with-repository/"}}},{"node":{"id":"3e4f5081-4d48-5288-890f-2915d83c9915","excerpt":"About Physical stores In FuryStack, the preferred mode of accessing data is via physical stores. A physical store is a bare minimum‚Ä¶","frontmatter":{"title":"Let's store some freaking data üì¶","date":"2021-06-23T09:58:20.257Z"},"fields":{"readingTime":{"text":"2 min read"},"slug":"/004-getting-started-with-data-stores/"}}},{"node":{"id":"cf58ec06-30e7-51f4-a586-846c643e725a","excerpt":"Injectable services An injectable service is basically a class, decorated with the  decorator. If you decorate a class, its injectable‚Ä¶","frontmatter":{"title":"DI / IOC with @furystack/inject üíâ","date":"2021-06-23T08:58:20.257Z"},"fields":{"readingTime":{"text":"3 min read"},"slug":"/003-getting-started-with-inject/"}}}]}},"pageContext":{"slug":"/006-getting-started-with-rest/","prev":{"excerpt":"Disclaimer If you are using a repository, use the repository all the time. - Anonymous As callbacks, authorization and data manipulation‚Ä¶","frontmatter":{"title":"Build a business layer with a Repository","tags":["Getting Started","repository"],"date":"2021-06-23T10:58:20.257Z","draft":false,"excerpt":"A Repository is the next layer above the data stores. When setting up a repository, you can create DataSets that can rely on a previously configured physical store. The difference is that while PhysicalStore focuses on the data, DataSet focuses on business logic. You can authorize, check permissions, subscribe to entity changes, etc...","image":{"childImageSharp":{"fluid":{"aspectRatio":1.7850287907869482,"base64":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAYHBAj/xAAXAQADAQAAAAAAAAAAAAAAAAACAwUG/9oADAMBAAIQAxAAAAHglavWXAXpgOgDf//EABkQAAMBAQEAAAAAAAAAAAAAAAEDBAIFAP/aAAgBAQABBQK7FFChX1ypHTu1MefGrzdFgte+Oj//xAAfEQEAAgEDBQAAAAAAAAAAAAABAhESACFRAyIxYmP/2gAIAQMBAT8BxlAm5sccRI25WB67bm1eL0TiAM+pdF9keD6HGv/EACERAAICAAUFAAAAAAAAAAAAAAECESEDEiMxMgAEIkFR/9oACAECAQE/AR3Svk0lcMzEFwAyQzbc5MIbzC4+mOUsuDhZWJYedwTInRa43s376//EACQQAAMAAQMEAgMBAAAAAAAAAAECAxEEEhMABRQhMUEiRGHx/9oACAEBAAY/Ap2AqtGpWj0bKTDlzOmxnoGVnwXbi5Rtb3j6dq01FkwizFE5dklVjLiJQ0X5O0jBYbSfrrTNSviZgnGFFYeRP3jUtlTzNQ7gbA7SECLgTAGhZIgNTV61HO52LKO36OgBLMc/najf0uc9do3ftajtvkYAQ1301aOHKYOGUAEfHrp9PpbWhCbOElKroijkf4Ab/BgD0AOv/8QAGxABAAMBAAMAAAAAAAAAAAAAAREhMQBBUWH/2gAIAQEAAT8hhgVoEITgPsZ4VWXQY5pmCjeSKTSLYT6Oo8CSAXmaPZC1uqpqKB6RCUBpGRAqb5hKAIPAxBh6YRH/2gAMAwEAAgADAAAAEKff/8QAGBEBAQEBAQAAAAAAAAAAAAAAAREhMQD/2gAIAQMBAT8Qcw1QCMukCRQGQoVzMZkKVjwuGGPPf//EABgRAQEBAQEAAAAAAAAAAAAAAAERIQBB/9oACAECAQE/EBm36mM+qItILRORYMBUDIMMMFqIk//EABcQAQEBAQAAAAAAAAAAAAAAAAERACH/2gAIAQEAAT8QD8Ipb3ZaUnhDCLeXR4quv21lMBNKJCkAQ+zGT36QM4aHsgGFCbB9GF9s0WWQLqrkmCgbccb/AP/Z","sizes":"(max-width: 1280px) 100vw, 1280px","src":"/static/ced8c70f9ce4a51f7edf0501895e4440/68386/005-getting-started-with-repository-cover.jpg","srcSet":"/static/ced8c70f9ce4a51f7edf0501895e4440/0079a/005-getting-started-with-repository-cover.jpg 930w,\n/static/ced8c70f9ce4a51f7edf0501895e4440/68386/005-getting-started-with-repository-cover.jpg 1280w"}}},"author":[{"id":"gallayl","bio":"Lead developer, architect and local demigod @FuryStack","avatar":{"children":[{"fluid":{"aspectRatio":1,"base64":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAcICgYJ/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABXZzxe8xMzqxkmv4EKA//xAAbEAACAwEBAQAAAAAAAAAAAAAEBQIDBgcBFP/aAAgBAQABBQJ31G4C/BZ08NcGAymIAwG9ZcqlmAcalNj8VdsoWb1yQpxq7rXRFIv/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAkEAACAgEEAgEFAAAAAAAAAAACAwEEBRESEyEABjEUJDNCUf/aAAgBAQAGPwLI18LbqjdzZY0KV1qgJWFrMxcfVW2AwtlqwMp+1g9K4NMOYSAJFlXJu96zWZOblO/bTkjxl9FuvZcsDUhgLhlZbibrJ1mcXXHCxnxRK9vzmIVy5AQpYzDY+3XCAyt4JInvpWWk0yEpLccbR2DAwMRMoK9C3rmstW1vYdB1E9x3ugds6xpPnrF51eknMhhq+HB3LvayueYt2QBc/jkUv5eQYGWrMYFkxMLKSGC02ZHMhprp2OYv6+AzSC2/qfYkPxIFETE7SjqdJif5MTpPnq3rmOUmrVtWpyjLYnbPJiykLCq10XG2mTWqKbesP464KNry5HNYXyNOn7Re4BJhxFgKtxm5hyTJl9pDnFvPVhbmTqZEXyU+f//EABgQAQEBAQEAAAAAAAAAAAAAAAERACEx/9oACAEBAAE/IZFe2mLrGVi6qM/uvtAryzYauggG4Zonls2OlRTeSBInRCA7LlEgdWpWI3jIkJwEgoCCXiPuqxoElb1AFh408EZOOj/ZimTpcBcvZO02rGr3D//aAAwDAQACAAMAAAAQcAgA/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAGRABAAMBAQAAAAAAAAAAAAAAAQARITEQ/9oACAEBAAE/EFWlwtxEnnyGQr1KTB9M3Kvmjq9dIgp4yCig6pe5uS16cHahnfSU9ZkE+Ygv2kgg6RA7mhyFjWcWpFAwjBliG3rGG6pZpBypylkP21XgP//Z","sizes":"(max-width: 400px) 100vw, 400px","src":"/static/d7724f53280864f259a1cb93c2bd9d56/25252/gallayl.jpg","srcSet":"/static/d7724f53280864f259a1cb93c2bd9d56/fd013/gallayl.jpg 200w,\n/static/d7724f53280864f259a1cb93c2bd9d56/25252/gallayl.jpg 400w"}}]}}]},"fields":{"readingTime":{"text":"3 min read"},"layout":"post","slug":"/005-getting-started-with-repository/"}},"next":{"excerpt":"Prerequisites Read the previous article about type-safe REST APIs, if you haven‚Äôt yet. It will give a huge boost on productivity. Seriously‚Ä¶","frontmatter":{"title":"Data validation with REST and json-schemas","tags":["Getting Started","rest","rest-service","rest-client-fetch","rest-client-got","json-schemas"],"date":"2021-06-23T13:58:20.257Z","draft":false,"excerpt":"We have a strongly typed REST API interface with build-time type checking. Can we build runtime validation with a minimal effort? (Spoiler alert - yesss)","image":{"childImageSharp":{"fluid":{"aspectRatio":1.33428981348637,"base64":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAPABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAkCBwgK/8QAFQEBAQAAAAAAAAAAAAAAAAAABQP/2gAMAwEAAhADEAAAAdT2bzYTuQ8UR6GIf//EABwQAAEEAwEAAAAAAAAAAAAAAAMCBQYHAAEEFP/aAAgBAQABBQKP2pHQcq7Rjfja7Naw9YXQotqcVnz0r3n/xAAgEQACAQMEAwAAAAAAAAAAAAABAhEAEiEDMUFRBCIz/9oACAEDAQE/AU1PMBhVDJkCXXYnDfKZAj1kiSd6S+1ccdk9czmv/8QAIxEAAgAFAgcAAAAAAAAAAAAAAQIAAxEhUQRBEiIjMTIzkf/aAAgBAgEBPwF5ejmUdnKTORiRLa5HknuA4SSasAGttDlS7dY98IMbUt9tmP/EACgQAAIBAgUDAwUAAAAAAAAAAAECAwQRAAUGEiEUUWETIkExMkKR4f/aAAgBAQAGPwLNJ2rKYip1Jm9TEvUxhzBV1UYiksWLlAilyRCf1yGnkr8t6nZdaVc4y73Xn9LaJGdQpER6l9yfZuVQzi2NRvJqnL8rWr1BUVcNOk9HIrQy0OXgSrJMhaTc6OpYbVuhUKNpwCpUEX59NSxHZiR7h4Pi2Px+vJCBTcE9rf0fGO3gcAcfAx//xAAZEAEAAwEBAAAAAAAAAAAAAAABABEhMUH/2gAIAQEAAT8h23lCUJaDlV6ZeuIlWJLxkOjYCXAPFDUlDA44Lo3qEItGlzETCoSjQSqFTMq1GzgKqdIgwAwAoMOW16r7P//aAAwDAQACAAMAAAAQMM//xAAYEQEBAQEBAAAAAAAAAAAAAAABESEAMf/aAAgBAwEBPxBHZZskhlzEINCCDPlwpmWkwIaDAYMK9//EABgRAQEAAwAAAAAAAAAAAAAAAAERITFB/9oACAECAQE/EN0UMIBVwQQQSmrACWEoBA02gsVxUp//xAAZEAEBAQEBAQAAAAAAAAAAAAABEQAhMUH/2gAIAQEAAT8QRIgqGZucUZDTAzkj7/ed2nN5NICb1TYUisVhSsX3j+bEqoXefhHhxIN4ZUAS5fhnMWgigDh9pb//2Q==","sizes":"(max-width: 967px) 100vw, 967px","src":"/static/0a5c0f152cb10f20dc394825074b098c/5c197/007-data-validation-cover.jpg","srcSet":"/static/0a5c0f152cb10f20dc394825074b098c/0079a/007-data-validation-cover.jpg 930w,\n/static/0a5c0f152cb10f20dc394825074b098c/5c197/007-data-validation-cover.jpg 967w"}}},"author":[{"id":"gallayl","bio":"Lead developer, architect and local demigod @FuryStack","avatar":{"children":[{"fluid":{"aspectRatio":1,"base64":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAcICgYJ/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABXZzxe8xMzqxkmv4EKA//xAAbEAACAwEBAQAAAAAAAAAAAAAEBQIDBgcBFP/aAAgBAQABBQJ31G4C/BZ08NcGAymIAwG9ZcqlmAcalNj8VdsoWb1yQpxq7rXRFIv/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAkEAACAgEEAgEFAAAAAAAAAAACAwEEBRESEyEABjEUJDNCUf/aAAgBAQAGPwLI18LbqjdzZY0KV1qgJWFrMxcfVW2AwtlqwMp+1g9K4NMOYSAJFlXJu96zWZOblO/bTkjxl9FuvZcsDUhgLhlZbibrJ1mcXXHCxnxRK9vzmIVy5AQpYzDY+3XCAyt4JInvpWWk0yEpLccbR2DAwMRMoK9C3rmstW1vYdB1E9x3ugds6xpPnrF51eknMhhq+HB3LvayueYt2QBc/jkUv5eQYGWrMYFkxMLKSGC02ZHMhprp2OYv6+AzSC2/qfYkPxIFETE7SjqdJif5MTpPnq3rmOUmrVtWpyjLYnbPJiykLCq10XG2mTWqKbesP464KNry5HNYXyNOn7Re4BJhxFgKtxm5hyTJl9pDnFvPVhbmTqZEXyU+f//EABgQAQEBAQEAAAAAAAAAAAAAAAERACEx/9oACAEBAAE/IZFe2mLrGVi6qM/uvtAryzYauggG4Zonls2OlRTeSBInRCA7LlEgdWpWI3jIkJwEgoCCXiPuqxoElb1AFh408EZOOj/ZimTpcBcvZO02rGr3D//aAAwDAQACAAMAAAAQcAgA/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAGRABAAMBAQAAAAAAAAAAAAAAAQARITEQ/9oACAEBAAE/EFWlwtxEnnyGQr1KTB9M3Kvmjq9dIgp4yCig6pe5uS16cHahnfSU9ZkE+Ygv2kgg6RA7mhyFjWcWpFAwjBliG3rGG6pZpBypylkP21XgP//Z","sizes":"(max-width: 400px) 100vw, 400px","src":"/static/d7724f53280864f259a1cb93c2bd9d56/25252/gallayl.jpg","srcSet":"/static/d7724f53280864f259a1cb93c2bd9d56/fd013/gallayl.jpg 200w,\n/static/d7724f53280864f259a1cb93c2bd9d56/25252/gallayl.jpg 400w"}}]}}]},"fields":{"readingTime":{"text":"2 min read"},"layout":"post","slug":"/007-data-validation-with-rest-and-json-schema/"}},"primaryTag":"Getting Started"}},"staticQueryHashes":["138661842","4089446364"]}