{"componentChunkName":"component---src-templates-post-tsx","path":"/007-data-validation-with-rest-and-json-schema/","result":{"data":{"logo":null,"markdownRemark":{"html":"<h3>Prerequisites</h3>\n<p>Read the <a href=\"/006-getting-started-with-rest\">previous article</a> about type-safe REST APIs, if you haven’t yet. It will give a huge boost on productivity. Seriously… go go go…\r\nSo, glad you’ve back. Now let’s get down to business…</p>\n<h3>Some sad facts about Typescript interfaces - and a possible solution</h3>\n<p>Let’s face it - you have a well-defined REST API in a Typescript interface but you cannot use Typescript interfaces realtime as they <em>does not exists realtime</em> 😿\r\nBut there’s a solution that can be easily adopted - JSON Schemas</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 507px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ce4007557d939fec78dc3b32e598ef81/e988a/007-impossible.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 98.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAYHCAIF/8QAFwEAAwEAAAAAAAAAAAAAAAAAAgMEBf/aAAwDAQACEAMQAAABsPmKesQ6TQc/Iw9SxhUXUETf/8QAGxABAQACAwEAAAAAAAAAAAAABgUDBwIEFRT/2gAIAQEAAQUCTMJPDLsjY8X5zr4d3oSjyBs9cX1zNiE9cja5m72KanKmk+jVN7CZzoH/xAAiEQACAgEDBAMAAAAAAAAAAAABAgMRIQAEEhMiMUEyUmH/2gAIAQMBAT8BlZGEG32IJliWPpNOq3JK0lt1QoKOrMU4qT2gsrcxnXT32LEJNCzzkFnFmqxZ1H4U+6bPv5DRd7Pe3n7H81//xAAiEQACAgEEAQUAAAAAAAAAAAABAwIREgAEISJRBRMxMnH/2gAIAQIBAT8BIdm9jMBBpl7o7XBQXjEp4E1zHybzvgxo6LN9fRWwxvrlNwNcVYCzX5Z16e902xE3NmDn9mSl58nW53G4juHCL3ABswAGzAAEuAAJcDX/xAAlEAACAgICAQMFAQAAAAAAAAACAwEEBRESEwAGFCEVIiMxMkH/2gAIAQEABj8CovwSffV0RbTkYoyxi1NQKrQzYIRIZYhSiAV/2gjj8c8i44KhhKyEtuurZO40X+0W/HJrvH2gEj8hwVkqrnxy621lSqROCKPMTcs3MdRtPpKmzVKTaS3r2luzDcT2EvtD9F1mHL7tzND0rk/QdihTu2bTFU3+qb507u7guY/H369qwNuSfZkrFa8NRwTIx1vAtL9HOPAVXFlr17HYtQ5HLqVRKpWu2MgybDMiCXwHtloOpyTPY6Z5B068wWYx2HGvTy2NRkFVzvZhso9xsjT2HkIkxWzmIlqIIdFAxE68X9fzWVyZYuN0zsvWZri2xZPHfT/JEpZa1GpGP8+PKqb2RydpFgrVnpa5HWhrOfKa0DWGVRy2zhEyMMki18z5iKFPPWU06dFNeqgU0+KELjQKCZrcpGP3syIvmfu1qI//xAAZEAEBAQEBAQAAAAAAAAAAAAABEQAhMUH/2gAIAQEAAT8hQ5UIVCdoqAXKbiylqsGLZYpFEGq5UhWj4TgaO7LsiIof6vP1DiCEoNlDfcfGLXlBRh4CpWWd48UKnI4I9LsOqxOsDYBSc6wBAhgwOyKOywf/2gAMAwEAAgADAAAAEETYfv/EABkRAQEAAwEAAAAAAAAAAAAAAAERACExUf/aAAgBAwEBPxCJ1YADqjhjZEEeBCaUIgAoGjQa41YqqJqgFXbAJfDzDkCDABAugXmf/8QAGBEBAQEBAQAAAAAAAAAAAAAAAREhMQD/2gAIAQIBAT8QS0skkCoOqryIy8FCiqV3QWkNEuVldJAApmKOMhLyeUb46QAAAAAAABz3/8QAGBABAQEBAQAAAAAAAAAAAAAAAQARECH/2gAIAQEAAT8QRbiuiu8JF9kQFuaPqUAuCSHje54uIaqtVwAPFMn3Pw/0jA4w5XEi5nuxSBlSSdQAT+Q66AC1dhoGlb6aIjkq+EMekDWD+NNqhKMUQin/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"the relatime interface usage\"\n        title=\"the relatime interface usage\"\n        src=\"/static/ce4007557d939fec78dc3b32e598ef81/e988a/007-impossible.jpg\"\n        srcset=\"/static/ce4007557d939fec78dc3b32e598ef81/953fe/007-impossible.jpg 500w,\n/static/ce4007557d939fec78dc3b32e598ef81/e988a/007-impossible.jpg 507w\"\n        sizes=\"(max-width: 507px) 100vw, 507px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>So the plan is:</p>\n<ol>\n<li>Design the API</li>\n<li>Create a JSON Schema from the API definitions</li>\n<li>Wire some validation logic on the Backend</li>\n</ol>\n<h3>Generating the Schema</h3>\n<p>FuryStack offers some help when it comes to defining / designing the API interface - as mentioned in the last article. There is a nice tool that will help us create the JSON Schema - <a href=\"https://github.com/vega/ts-json-schema-generator\">ts-json-schema-generator</a>\r\nSo if we have an interface ready, we can generate the JSON schema with a simple command from an NPM script:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">yarn ts-json-schema-generator -f tsconfig.json --no-type-check -p common/src/path/to/my/api.schema.ts -o common/src/path/to/my/api.schema.json</code></pre></div>\n<p>Once it is done, you can access / re-export it in your <code class=\"language-text\">common</code> package - maybe you have to enable <code class=\"language-text\">resolveJsonModule</code> in your tsconfig.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> mySchema <span class=\"token keyword\">from</span> <span class=\"token string\">'./path/to/my/api.schema.json'</span>\r\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> mySchema <span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Validation in the Service</h3>\n<p>Once you will be able to import your schema, you can simply use the <code class=\"language-text\">Validate()</code> method in REST Api. Let’s take for example the endpoint from the previous post.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> mySchema <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'common'</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Validate <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@fuystack/rest-service'</span>\r\n\r\n<span class=\"token keyword\">const</span> customHeadersEndpoint<span class=\"token operator\">:</span> RequestAction<span class=\"token operator\">&lt;</span>CustomHeaders<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">Validate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    schema<span class=\"token operator\">:</span> mySchema\r\n    schemaName<span class=\"token operator\">:</span> <span class=\"token string\">'CustomHeaders'</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> headers <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>headers<span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token function\">JsonResult</span><span class=\"token punctuation\">(</span>headers<span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>The Gotchas</h3>\n<ul>\n<li>All input data (query, headers, url, body) will be validated - <strong>in depth</strong></li>\n<li>You can define nested types, string literals, optional parameters, type intersections, nearly everything that Typescript can offer. You can throw errors on additional parameters as well.</li>\n<li>You will automatically get nice 400 responses with detailed error messages if you miss something</li>\n<li>Schema can be re-generated as your API changes</li>\n</ul>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Prerequisites"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Read the "},{"type":"element","tagName":"a","properties":{"href":"/006-getting-started-with-rest"},"children":[{"type":"text","value":"previous article"}]},{"type":"text","value":" about type-safe REST APIs, if you haven’t yet. It will give a huge boost on productivity. Seriously… go go go…\r\nSo, glad you’ve back. Now let’s get down to business…"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Some sad facts about Typescript interfaces - and a possible solution"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Let’s face it - you have a well-defined REST API in a Typescript interface but you cannot use Typescript interfaces realtime as they "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"does not exists realtime"}]},{"type":"text","value":" 😿\r\nBut there’s a solution that can be easily adopted - JSON Schemas"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 507px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/ce4007557d939fec78dc3b32e598ef81/e988a/007-impossible.jpg","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 98.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAYHCAIF/8QAFwEAAwEAAAAAAAAAAAAAAAAAAgMEBf/aAAwDAQACEAMQAAABsPmKesQ6TQc/Iw9SxhUXUETf/8QAGxABAQACAwEAAAAAAAAAAAAABgUDBwIEFRT/2gAIAQEAAQUCTMJPDLsjY8X5zr4d3oSjyBs9cX1zNiE9cja5m72KanKmk+jVN7CZzoH/xAAiEQACAgEDBAMAAAAAAAAAAAABAgMRIQAEEhMiMUEyUmH/2gAIAQMBAT8BlZGEG32IJliWPpNOq3JK0lt1QoKOrMU4qT2gsrcxnXT32LEJNCzzkFnFmqxZ1H4U+6bPv5DRd7Pe3n7H81//xAAiEQACAgEEAQUAAAAAAAAAAAABAwIREgAEISJRBRMxMnH/2gAIAQIBAT8BIdm9jMBBpl7o7XBQXjEp4E1zHybzvgxo6LN9fRWwxvrlNwNcVYCzX5Z16e902xE3NmDn9mSl58nW53G4juHCL3ABswAGzAAEuAAJcDX/xAAlEAACAgICAQMFAQAAAAAAAAACAwEEBRESEwAGFCEVIiMxMkH/2gAIAQEABj8CovwSffV0RbTkYoyxi1NQKrQzYIRIZYhSiAV/2gjj8c8i44KhhKyEtuurZO40X+0W/HJrvH2gEj8hwVkqrnxy621lSqROCKPMTcs3MdRtPpKmzVKTaS3r2luzDcT2EvtD9F1mHL7tzND0rk/QdihTu2bTFU3+qb507u7guY/H369qwNuSfZkrFa8NRwTIx1vAtL9HOPAVXFlr17HYtQ5HLqVRKpWu2MgybDMiCXwHtloOpyTPY6Z5B068wWYx2HGvTy2NRkFVzvZhso9xsjT2HkIkxWzmIlqIIdFAxE68X9fzWVyZYuN0zsvWZri2xZPHfT/JEpZa1GpGP8+PKqb2RydpFgrVnpa5HWhrOfKa0DWGVRy2zhEyMMki18z5iKFPPWU06dFNeqgU0+KELjQKCZrcpGP3syIvmfu1qI//xAAZEAEBAQEBAQAAAAAAAAAAAAABEQAhMUH/2gAIAQEAAT8hQ5UIVCdoqAXKbiylqsGLZYpFEGq5UhWj4TgaO7LsiIof6vP1DiCEoNlDfcfGLXlBRh4CpWWd48UKnI4I9LsOqxOsDYBSc6wBAhgwOyKOywf/2gAMAwEAAgADAAAAEETYfv/EABkRAQEAAwEAAAAAAAAAAAAAAAERACExUf/aAAgBAwEBPxCJ1YADqjhjZEEeBCaUIgAoGjQa41YqqJqgFXbAJfDzDkCDABAugXmf/8QAGBEBAQEBAQAAAAAAAAAAAAAAAREhMQD/2gAIAQIBAT8QS0skkCoOqryIy8FCiqV3QWkNEuVldJAApmKOMhLyeUb46QAAAAAAABz3/8QAGBABAQEBAQAAAAAAAAAAAAAAAQARECH/2gAIAQEAAT8QRbiuiu8JF9kQFuaPqUAuCSHje54uIaqtVwAPFMn3Pw/0jA4w5XEi5nuxSBlSSdQAT+Q66AC1dhoGlb6aIjkq+EMekDWD+NNqhKMUQin/2Q=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"the relatime interface usage","title":"the relatime interface usage","src":"/static/ce4007557d939fec78dc3b32e598ef81/e988a/007-impossible.jpg","srcSet":["/static/ce4007557d939fec78dc3b32e598ef81/953fe/007-impossible.jpg 500w","/static/ce4007557d939fec78dc3b32e598ef81/e988a/007-impossible.jpg 507w"],"sizes":"(max-width: 507px) 100vw, 507px","style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy","decoding":"async"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"So the plan is:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Design the API"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Create a JSON Schema from the API definitions"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Wire some validation logic on the Backend"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Generating the Schema"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"FuryStack offers some help when it comes to defining / designing the API interface - as mentioned in the last article. There is a nice tool that will help us create the JSON Schema - "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/vega/ts-json-schema-generator"},"children":[{"type":"text","value":"ts-json-schema-generator"}]},{"type":"text","value":"\r\nSo if we have an interface ready, we can generate the JSON schema with a simple command from an NPM script:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sh"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sh"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sh"]},"children":[{"type":"text","value":"yarn ts-json-schema-generator -f tsconfig.json --no-type-check -p common/src/path/to/my/api.schema.ts -o common/src/path/to/my/api.schema.json"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Once it is done, you can access / re-export it in your "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"common"}]},{"type":"text","value":" package - maybe you have to enable "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"resolveJsonModule"}]},{"type":"text","value":" in your tsconfig."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"ts"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-ts"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-ts"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"*"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"as"}]},{"type":"text","value":" mySchema "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'./path/to/my/api.schema.json'"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" mySchema "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Validation in the Service"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Once you will be able to import your schema, you can simply use the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Validate()"}]},{"type":"text","value":" method in REST Api. Let’s take for example the endpoint from the previous post."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"ts"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-ts"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-ts"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" mySchema "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'common'"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" Validate "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'@fuystack/rest-service'"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" customHeadersEndpoint"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" RequestAction"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"CustomHeaders"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"Validate"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    schema"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" mySchema\n    schemaName"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'CustomHeaders'"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"async"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" headers "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"=>"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","builtin"]},"children":[{"type":"text","value":"console"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"log"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"headers"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"JsonResult"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"headers"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"The Gotchas"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"All input data (query, headers, url, body) will be validated - "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"in depth"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"You can define nested types, string literals, optional parameters, type intersections, nearly everything that Typescript can offer. You can throw errors on additional parameters as well."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"You will automatically get nice 400 responses with detailed error messages if you miss something"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Schema can be re-generated as your API changes"}]},{"type":"text","value":"\n"}]}],"data":{"quirksMode":false}},"excerpt":"Prerequisites Read the previous article about type-safe REST APIs, if you haven’t yet. It will give a huge boost on productivity. Seriously…","fields":{"readingTime":{"text":"2 min read"}},"frontmatter":{"title":"Data validation with REST and json-schemas","userDate":"23 June 2021","date":"2021-06-23T13:58:20.257Z","tags":["Getting Started","rest","rest-service","rest-client-fetch","rest-client-got","json-schemas"],"excerpt":"We have a strongly typed REST API interface with build-time type checking. Can we build runtime validation with a minimal effort? (Spoiler alert - yesss)","image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAPABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAkCBwgK/8QAFQEBAQAAAAAAAAAAAAAAAAAABQP/2gAMAwEAAhADEAAAAdT2bzYTuQ8UR6GIf//EABwQAAEEAwEAAAAAAAAAAAAAAAMCBQYHAAEEFP/aAAgBAQABBQKP2pHQcq7Rjfja7Naw9YXQotqcVnz0r3n/xAAgEQACAQMEAwAAAAAAAAAAAAABAhEAEiEDMUFRBCIz/9oACAEDAQE/AU1PMBhVDJkCXXYnDfKZAj1kiSd6S+1ccdk9czmv/8QAIxEAAgAFAgcAAAAAAAAAAAAAAQIAAxEhUQRBEiIjMTIzkf/aAAgBAgEBPwF5ejmUdnKTORiRLa5HknuA4SSasAGttDlS7dY98IMbUt9tmP/EACgQAAIBAgUDAwUAAAAAAAAAAAECAwQRAAUGEiEUUWETIkExMkKR4f/aAAgBAQAGPwLNJ2rKYip1Jm9TEvUxhzBV1UYiksWLlAilyRCf1yGnkr8t6nZdaVc4y73Xn9LaJGdQpER6l9yfZuVQzi2NRvJqnL8rWr1BUVcNOk9HIrQy0OXgSrJMhaTc6OpYbVuhUKNpwCpUEX59NSxHZiR7h4Pi2Px+vJCBTcE9rf0fGO3gcAcfAx//xAAZEAEAAwEBAAAAAAAAAAAAAAABABEhMUH/2gAIAQEAAT8h23lCUJaDlV6ZeuIlWJLxkOjYCXAPFDUlDA44Lo3qEItGlzETCoSjQSqFTMq1GzgKqdIgwAwAoMOW16r7P//aAAwDAQACAAMAAAAQMM//xAAYEQEBAQEBAAAAAAAAAAAAAAABESEAMf/aAAgBAwEBPxBHZZskhlzEINCCDPlwpmWkwIaDAYMK9//EABgRAQEAAwAAAAAAAAAAAAAAAAERITFB/9oACAECAQE/EN0UMIBVwQQQSmrACWEoBA02gsVxUp//xAAZEAEBAQEBAQAAAAAAAAAAAAABEQAhMUH/2gAIAQEAAT8QRIgqGZucUZDTAzkj7/ed2nN5NICb1TYUisVhSsX3j+bEqoXefhHhxIN4ZUAS5fhnMWgigDh9pb//2Q==","aspectRatio":1.33428981348637,"src":"/static/0a5c0f152cb10f20dc394825074b098c/5c197/007-data-validation-cover.jpg","srcSet":"/static/0a5c0f152cb10f20dc394825074b098c/0079a/007-data-validation-cover.jpg 930w,\n/static/0a5c0f152cb10f20dc394825074b098c/5c197/007-data-validation-cover.jpg 967w","sizes":"(max-width: 967px) 100vw, 967px"}}},"author":[]}},"relatedPosts":{"totalCount":6,"edges":[{"node":{"id":"83786420-d98c-502b-9e4d-ed33ee90da2f","excerpt":"Prerequisites Read the previous article about type-safe REST APIs, if you haven’t yet. It will give a huge boost on productivity. Seriously…","frontmatter":{"title":"Data validation with REST and json-schemas","date":"2021-06-23T13:58:20.257Z"},"fields":{"readingTime":{"text":"2 min read"},"slug":"/007-data-validation-with-rest-and-json-schema/"}}},{"node":{"id":"1366c6fe-b450-54f9-97bf-1906c129a56c","excerpt":"The problem 🤷‍♂️ The old-fashioned approach is to decouple nearly everything, but (as a fullstack dev) when speaking about the relation…","frontmatter":{"title":"REST in peace","date":"2021-06-23T12:58:20.257Z"},"fields":{"readingTime":{"text":"6 min read"},"slug":"/006-getting-started-with-rest/"}}},{"node":{"id":"1ab41dd0-2581-5e39-8809-08cf3b751e1c","excerpt":"Disclaimer If you are using a repository, use the repository all the time. - Anonymous As callbacks, authorization and data manipulation…","frontmatter":{"title":"Build a business layer with a Repository","date":"2021-06-23T10:58:20.257Z"},"fields":{"readingTime":{"text":"3 min read"},"slug":"/005-getting-started-with-repository/"}}},{"node":{"id":"3e4f5081-4d48-5288-890f-2915d83c9915","excerpt":"About Physical stores In FuryStack, the preferred mode of accessing data is via physical stores. A physical store is a bare minimum…","frontmatter":{"title":"Let's store some freaking data 📦","date":"2021-06-23T09:58:20.257Z"},"fields":{"readingTime":{"text":"2 min read"},"slug":"/004-getting-started-with-data-stores/"}}},{"node":{"id":"cf58ec06-30e7-51f4-a586-846c643e725a","excerpt":"Injectable services An injectable service is basically a class, decorated with the  decorator. If you decorate a class, its injectable…","frontmatter":{"title":"DI / IOC with @furystack/inject 💉","date":"2021-06-23T08:58:20.257Z"},"fields":{"readingTime":{"text":"3 min read"},"slug":"/003-getting-started-with-inject/"}}}]}},"pageContext":{"slug":"/007-data-validation-with-rest-and-json-schema/","prev":{"excerpt":"The problem 🤷‍♂️ The old-fashioned approach is to decouple nearly everything, but (as a fullstack dev) when speaking about the relation…","frontmatter":{"title":"REST in peace","tags":["Getting Started","rest","rest-service","rest-client-fetch","rest-client-got"],"date":"2021-06-23T12:58:20.257Z","draft":false,"excerpt":"Designing and implementing APIs can be hard and consuming them can be frustrating, if they doesn't work as expected. REST API as a Typescript interface to the rescue!","image":{"childImageSharp":{"fluid":{"aspectRatio":1.5,"base64":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAkFBwj/xAAXAQADAQAAAAAAAAAAAAAAAAAAAgMH/9oADAMBAAIQAxAAAAGnJFT7MseppoVaDf/EABoQAAMBAAMAAAAAAAAAAAAAAAMEBgUCBxH/2gAIAQEAAQUC0LaG19E/ibK8+DkBV0wDSt21p41N2FQUer//xAAjEQABAwIFBQAAAAAAAAAAAAABAgMRBBIAFCEiUTE0QUKB/9oACAEDAQE/AaB9lLqQ/Rs1AUYtVcSTG3cpznrynQjGco57fz6pat+XImOJ1x//xAAkEQACAQIGAQUAAAAAAAAAAAABAgMEEQAFEhUhIhMxMkFRYf/aAAgBAgEBPwGuynZyrkPWUcg0P5pEMkMvOgx2WNtDD3Dtb75xsWat2WWiiU8iN4i7IOOrMtwSPmxI/T64/8QAIxAAAwACAgEEAwEAAAAAAAAAAQIDBBESIQAFEyJBFDJRgf/aAAgBAQAGPwJMbGyss2oyzn6j+IYSo7aVEpzPJx9B3n1/deLCig9c+BF5tSTfFGldkOOzqw+aKzb5KBx78k+T7mPV15NKjgFOyNDajkvXTDo/RPkrrxLydaLyGxyU7U/4e/Mu/qOBDIbCxXG1oUeml2SpZKpFjr9kmSD2PKeovk1wJiaY2LhYd6LDFxYlvbkD0aNtmZ6sAXZj0o0o/8QAGRABAQEBAQEAAAAAAAAAAAAAAREhADFB/9oACAEBAAE/IaPTMqRBbLLJ0FMAb334VZkxEtAftQoPRNe76OguM5OQUuAuUKPnbvowxQ8w+1AhxIGC4tmudLQ9P//aAAwDAQACAAMAAAAQzC//xAAZEQEBAQADAAAAAAAAAAAAAAABESEAMUH/2gAIAQMBAT8QqcdHQHVEe2hWdiCNlSKFoHCKeIKDef/EABcRAQEBAQAAAAAAAAAAAAAAAAERIQD/2gAIAQIBAT8Q1dfFuloA1EimnYIlWGownRXsDBf/xAAZEAEBAQADAAAAAAAAAAAAAAABEQAhMUH/2gAIAQEAAT8QVoab6F7TceiUnHcNm9h0Pd00Lo12AGqeW4imR4VzNOkzprAFJ9yD5n/qQmoBHxz7Ek8FHeo//9k=","sizes":"(max-width: 1280px) 100vw, 1280px","src":"/static/4733ebf561cee32e92d9104845e8523e/68386/006-getting-started-with-rest-cover.jpg","srcSet":"/static/4733ebf561cee32e92d9104845e8523e/0079a/006-getting-started-with-rest-cover.jpg 930w,\n/static/4733ebf561cee32e92d9104845e8523e/68386/006-getting-started-with-rest-cover.jpg 1280w"}}},"author":[]},"fields":{"readingTime":{"text":"6 min read"},"layout":"post","slug":"/006-getting-started-with-rest/"}},"next":{"excerpt":"The Heritage from C# It’s not a big sectet that one of the main inspiration for FuryStack is the .NET (legacy and Core) stack where…","frontmatter":{"title":"Bye-bye extension methods","tags":["FuryStack","core","filesystem-store","logging","mongodb-store","redis-store","repository","rest-service","security","sequelize-store","websocket-api","inject"],"date":"2022-04-30T18:00:00.257Z","draft":false,"excerpt":"Using extension methods was fun at the beginning but I've ran into more and more problems with them","image":{"childImageSharp":{"fluid":{"aspectRatio":1.9703389830508475,"base64":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAcICf/EABYBAQEBAAAAAAAAAAAAAAAAAAUCBP/aAAwDAQACEAMQAAABlWhsuKtHVewvDVX/xAAaEAADAQADAAAAAAAAAAAAAAADBAUGAAEW/9oACAEBAAEFAs7RnMkzvlO0r16WegYxR0cUQnL6CIaX/8QAIREAAgEDAwUAAAAAAAAAAAAAAQIRAyExAARBEhMyUWH/2gAIAQMBAT8Bpo1SrPf3CzIhXSPMJaaRP3OY4sWeGI6UMGJZZJxcnk+9f//EACIRAAEBBgcAAAAAAAAAAAAAAAECAAMSIjFRERNCUmGB8P/aAAgBAgEBPwF4YEEQolhNDsUoauMO2dE5aZlUv67f/8QAJhAAAwABAwMCBwAAAAAAAAAAAQIDBAUREgATIRQjBhUkMTIzUf/aAAgBAQAGPwLVk+IK0wymIMjTtP0NFrCnde0ciudjW79MQXNW90AUBWe8DJxTqM8XN1ysYplVwKjDxQxurm9ksTkSnjsoiPTHj9SPU8Vbt9NfH1qeJ3oYz3jLLpSYyBFJ0ZH3shD8A3suZ7kj9nc61AzrSZpnFKFHZTRRB9lcgjkvgeDuPA/nWiT5v26/P+6nI8KcI6eE5r9n4C1gvLfiK0A/Nt2SWHiSQY2Fsk8eKKN8OJOyqgHk9f/EABgQAQEBAQEAAAAAAAAAAAAAAAERIQAx/9oACAEBAAE/IVRpQxcsMEy9uhfx6SWcGvAL69ao+pnhv2ICm/WLyloS5MYGOIgQSn6+vJtgw7MPJTZIEqKw1a73/9oADAMBAAIAAwAAABCn/wD/xAAZEQEBAAMBAAAAAAAAAAAAAAABEQAxQSH/2gAIAQMBAT8QBKGkmKoIE1UAGjg3JIiiPUUWqFeHP//EABoRAQEBAQADAAAAAAAAAAAAAAERITEAQXH/2gAIAQIBAT8QmSCK++1DUaN0TjEbEB4MAph3Cp8PP//EABcQAQEBAQAAAAAAAAAAAAAAAAERACH/2gAIAQEAAT8QIx+3zeyYG14rHc1oYr9GluodDSpr31qOE2JxFIlAzh1MGCuxkIRmUROJXtb+6wlCUGK6iXf/2Q==","sizes":"(max-width: 1920px) 100vw, 1920px","src":"/static/c46950d23d950ee202359c3861c86b9b/097fa/008-byebye-extension-methods.jpg","srcSet":"/static/c46950d23d950ee202359c3861c86b9b/0079a/008-byebye-extension-methods.jpg 930w,\n/static/c46950d23d950ee202359c3861c86b9b/8dba1/008-byebye-extension-methods.jpg 1860w,\n/static/c46950d23d950ee202359c3861c86b9b/097fa/008-byebye-extension-methods.jpg 1920w"}}},"author":[]},"fields":{"readingTime":{"text":"2 min read"},"layout":"post","slug":"/008-byebye-extension-methods/"}},"primaryTag":"Getting Started"}},"staticQueryHashes":["138661842","4089446364"]}